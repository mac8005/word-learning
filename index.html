<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wort-Galaxie Trainer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700;800&family=Nunito:wght@500;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="hero card">
        <div>
          <p class="eyebrow">Lernspiel</p>
          <h1>Wort-Galaxie Trainer</h1>
          <p class="subtitle">
            H√∂re genau zu, tippe das Wort und sammle M√ºnzen f√ºr Bonus-Spiele.
          </p>
        </div>
        <div class="coin-badge" id="coinBadge">M√ºnzen: <strong id="coinCount">0</strong></div>
      </header>

      <main class="layout">
        <section class="card panel" id="setupPanel">
          <h2>Neues Training starten</h2>
          <div class="controls-grid">
            <label>
              Trainingsmodus
              <select id="modeSelect">
                <option value="words" selected>W√∂rter</option>
                <option value="math">Malrechnen</option>
              </select>
            </label>
            <div class="field-group">
              <span id="setSizeLabel">W√∂rter pro Mission</span>
              <select id="setSize">
                <option value="5">5 W√∂rter</option>
                <option value="10" selected>10 W√∂rter</option>
                <option value="15">15 W√∂rter</option>
                <option value="20">20 W√∂rter</option>
              </select>
            </div>
          </div>
          <div class="field-group" id="wordSettings">
            <span class="label-row">
              Buchstabengruppen
              <span class="label-actions">
                <button type="button" class="btn-micro" id="selectAllGroupsBtn">Alle</button>
                <button type="button" class="btn-micro" id="selectNoGroupsBtn">Keine</button>
              </span>
            </span>
            <div class="letter-group-picker loading" id="letterGroupPicker">
              <span class="lg-placeholder">W√∂rter laden‚Ä¶</span>
            </div>
            <span class="lg-count" id="letterGroupCount"></span>
          </div>
          <div class="field-group hidden" id="mathSettings">
            <span class="label-row">
              Reihen ausw√§hlen
              <span class="label-actions">
                <button type="button" class="btn-micro" id="selectAllTablesBtn">Alle</button>
                <button type="button" class="btn-micro" id="selectNoTablesBtn">Keine</button>
              </span>
            </span>
            <div class="letter-group-picker" id="tablePicker"></div>
            <span class="lg-count" id="tableCount"></span>
          </div>
          <button id="startBtn" class="btn primary">Mission starten</button>
          <p class="small-note" id="wordNote">Tipp: Gross- und Kleinschreibung wird genau gepr√ºft.</p>
          <p class="small-note hidden" id="mathNote">Tipp: W√§hle eine oder mehrere Reihen und rechne mit Zahlen von 0 bis 10.</p>
        </section>

        <section class="card panel hidden" id="quizPanel">
          <div class="quiz-top">
            <h2 id="quizTitle">Schreibe, was du h√∂rst</h2>
            <p id="progressText">Wort 1 / 10</p>
          </div>
          <div class="progress-track">
            <div class="progress-fill" id="progressFill"></div>
          </div>
          <div class="task-display hidden" id="taskDisplay"></div>
          <div class="letter-slots" id="letterSlots"></div>
          <div class="quiz-controls">
            <button id="speakBtn" class="btn secondary">Wort vorlesen</button>
            <input
              id="wordInput"
              type="text"
              autocomplete="off"
              placeholder="Wort hier eingeben"
              aria-label="Gesprochenes Wort eingeben"
            />
            <button id="nextBtn" class="btn primary">N√§chstes Wort</button>
          </div>
          <p id="quizFeedback" class="feedback"></p>
        </section>

        <section class="card panel hidden" id="resultPanel">
          <h2>Missionsergebnis</h2>
          <div class="result-highlight">
            <div class="rating" id="ratingLabel">Wort-Held</div>
            <div class="score-line" id="scoreLine">8 / 10 richtig</div>
            <div class="score-line" id="coinRewardLine">+20 M√ºnzen erhalten</div>
          </div>
          <div id="mistakesBlock">
            <h3>Fehler-Labor</h3>
            <p>Korrigiere die falschen W√∂rter und hole Bonus-M√ºnzen.</p>
            <div id="mistakesList"></div>
            <button id="checkCorrectionsBtn" class="btn primary">Korrekturen pr√ºfen</button>
            <p id="correctionFeedback" class="feedback"></p>
          </div>
          <button id="playAgainBtn" class="btn secondary">Neues Set spielen</button>
        </section>

        <section class="card panel arcade-card" id="miniGamePanel">
          <h2 class="arcade-title">Bonus-Spiele</h2>
          <div class="arcade-games">
            <!-- Tetris -->
            <div class="arcade-game-row">
              <div class="arcade-game-header">
                <span class="arcade-game-name">üéÆ Tetris</span>
                <span class="ticket-badge">Spiele: <strong id="tetrisPlays">0</strong></span>
              </div>
              <p class="small-note">Trainiere W√∂rter, sammle 20 M√ºnzen und spiele 1 Runde.</p>
              <div class="arcade-actions">
                <button id="buyTetrisPlaysBtn" class="btn arcade-buy">1 Spiel f√ºr 20 M√ºnzen</button>
                <button id="openTetrisBtn" class="btn arcade-play">Tetris √∂ffnen</button>
              </div>
            </div>
            <!-- Snake -->
            <div class="arcade-game-row">
              <div class="arcade-game-header">
                <span class="arcade-game-name">üêç Snake</span>
                <span class="ticket-badge">Spiele: <strong id="snakePlays">0</strong></span>
              </div>
              <p class="small-note">Fress √Ñpfel, werde l√§nger, vermeide dich selbst.</p>
              <div class="arcade-actions">
                <button id="buySnakePlaysBtn" class="btn arcade-buy">1 Spiel f√ºr 20 M√ºnzen</button>
                <button id="openSnakeBtn" class="btn arcade-play">Snake √∂ffnen</button>
              </div>
            </div>
          </div>
          <p id="miniGameFeedback" class="feedback"></p>
        </section>
      </main>
      <footer class="build-info" id="buildInfo"></footer>
    </div>

    <!-- Tetris Modal -->
    <div class="tetris-modal-backdrop hidden" id="tetrisModalBackdrop">
      <div class="tetris-modal" id="tetrisModal">
        <div class="tetris-modal-header">
          <h2 class="tetris-modal-title">Tetris</h2>
          <div class="tetris-modal-badges">
            <span class="tetris-badge coin-inline" id="tetrisCoins">M√ºnzen: 0</span>
            <span class="tetris-badge ticket-inline">Spiele: <strong id="tetrisPlaysModal">0</strong></span>
          </div>
          <button class="tetris-close-btn" id="closeTetrisBtn" aria-label="Schliessen">&times;</button>
        </div>
        <div class="tetris-modal-body">
          <div class="tetris-stage">
            <div class="tetris-stats-col">
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">Punkte</span>
                <span class="tetris-stat-value" id="tetrisScore">0</span>
              </div>
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">Linien</span>
                <span class="tetris-stat-value" id="tetrisLines">0</span>
              </div>
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">Level</span>
                <span class="tetris-stat-value" id="tetrisLevel">1</span>
              </div>
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">Rekord</span>
                <span class="tetris-stat-value" id="tetrisHighscore">0</span>
              </div>
              <div class="tetris-stat-box next-piece-box">
                <span class="tetris-stat-label">N√§chstes</span>
                <canvas id="nextPieceCanvas" class="next-piece-canvas" width="96" height="96"></canvas>
              </div>
            </div>
            <div class="tetris-canvas-wrapper">
              <canvas
                id="tetrisCanvas"
                class="tetris-canvas"
                width="240"
                height="480"
                aria-label="Tetris Spielfeld"
              ></canvas>
              <div class="tetris-glow"></div>
            </div>
          </div>
          <div class="tetris-controls">
            <button id="startMiniGameBtn" class="btn tetris-btn-start">Tetris starten</button>
            <button id="pauseMiniGameBtn" class="btn tetris-btn-pause">Pause</button>
          </div>
          <div class="touch-controls" id="touchControls">
            <div class="touch-row">
              <button class="touch-btn" id="touchRotate" aria-label="Drehen">&#x21BB;</button>
            </div>
            <div class="touch-row">
              <button class="touch-btn" id="touchLeft" aria-label="Links">&larr;</button>
              <button class="touch-btn touch-drop" id="touchDrop" aria-label="Fallen lassen">&#x2B07;</button>
              <button class="touch-btn" id="touchRight" aria-label="Rechts">&rarr;</button>
            </div>
            <div class="touch-row">
              <button class="touch-btn" id="touchDown" aria-label="Runter">&darr;</button>
            </div>
          </div>
          <p class="tetris-hint tetris-hint-keyboard">‚Üê ‚Üí bewegen &middot; ‚Üë drehen &middot; ‚Üì schneller &middot; Leertaste fallen</p>
          <p id="tetrisModalFeedback" class="feedback tetris-feedback"></p>
        </div>
      </div>
    </div>

    <!-- Snake Modal -->
    <div class="tetris-modal-backdrop hidden snake-theme" id="snakeModalBackdrop">
      <div class="tetris-modal" id="snakeModal">
        <div class="tetris-modal-header">
          <h2 class="tetris-modal-title snake-title">üêç Snake</h2>
          <div class="tetris-modal-badges">
            <span class="tetris-badge coin-inline" id="snakeCoins">M√ºnzen: 0</span>
            <span class="tetris-badge ticket-inline">Spiele: <strong id="snakePlaysModal">0</strong></span>
          </div>
          <button class="tetris-close-btn" id="closeSnakeBtn" aria-label="Schliessen">&times;</button>
        </div>
        <div class="tetris-modal-body">
          <div class="tetris-stage snake-stage">
            <div class="tetris-stats-col">
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">Punkte</span>
                <span class="tetris-stat-value" id="snakeScore">0</span>
              </div>
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">Level</span>
                <span class="tetris-stat-value" id="snakeLevel">1</span>
              </div>
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">L√§nge</span>
                <span class="tetris-stat-value" id="snakeLength">3</span>
              </div>
              <div class="tetris-stat-box">
                <span class="tetris-stat-label">Rekord</span>
                <span class="tetris-stat-value" id="snakeHighscore">0</span>
              </div>
            </div>
            <div class="tetris-canvas-wrapper">
              <canvas
                id="snakeCanvas"
                class="tetris-canvas snake-canvas"
                width="280"
                height="280"
                aria-label="Snake Spielfeld"
              ></canvas>
              <div class="tetris-glow"></div>
            </div>
          </div>
          <div class="tetris-controls">
            <button id="startSnakeGameBtn" class="btn tetris-btn-start">Snake starten</button>
            <button id="pauseSnakeGameBtn" class="btn tetris-btn-pause">Pause</button>
          </div>
          <div class="snake-dpad" id="snakeTouchControls">
            <div class="touch-row">
              <button class="touch-btn snake-touch-btn" id="snakeTouchUp" aria-label="Hoch">&uarr;</button>
            </div>
            <div class="touch-row">
              <button class="touch-btn snake-touch-btn" id="snakeTouchLeft" aria-label="Links">&larr;</button>
              <button class="touch-btn snake-touch-btn" id="snakeTouchDown" aria-label="Runter">&darr;</button>
              <button class="touch-btn snake-touch-btn" id="snakeTouchRight" aria-label="Rechts">&rarr;</button>
            </div>
          </div>
          <p class="tetris-hint tetris-hint-keyboard">‚Üê ‚Üí ‚Üë ‚Üì / WASD bewegen &middot; Leertaste Pause</p>
          <p id="snakeModalFeedback" class="feedback tetris-feedback"></p>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
